<div class="carousel">
  <div id="carousel-controls" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img class="carousel-picture" alt="" src="<%= cl_image_path @space.pictures[0].path if @space.pictures[0].path.present? %>" data-holder-rendered="true">
      </div>
      <% @space.pictures.drop(1).each do |picture| %>
      <div class="carousel-item">
        <img class="carousel-picture" alt="" src="<%= cl_image_path picture.path %>" data-holder-rendered="true">
      </div>
      <% end %>
    </div>
    <a class="carousel-control-prev" href="#carousel-controls" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carousel-controls" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
</div>
</div>
<div class="header-space">
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-sm-6 sm-offset-1">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Space Details</h3>
          </div>
          <div class="card-body">
            <div class="media mb-5">
              <%= cl_image_tag @space.user.avatar, class: "d-flex mr-5 rounded avatar-xl" %>
              <div class="media-body">
                <h5><%= @space.name %></h5>
                <address class="text-muted small">
                  <%= @space.location %><br>
                  <%= @space.user.first_name %> <%= @space.user.last_name %>
                </address>
              </div>
            </div>
            <div class="row">
              <div class="col-6">
                <div class="h6">Activities</div>
                <% @space.activities.each do |activity| %>
                <%= activity.split('_').collect(&:capitalize).join(' ') %>
                <br>
                <% end %>
                <br>
              </div>
              <div class="col-6">
                <div class="h6">Amenities</div>
                <% @space.amenities.each do |amenity| %>
                <%= amenity.split('_').collect(&:capitalize).join(' ') %>
                <br>
                <% end %>
                <br>
              </div>
              <div class="col-6">
                <div class="h6">Rooms</div>
                <p>
                  <%= @space.room %>
                </p>
              </div>
              <div class="col-6">
                <div class="h6">Restrooms</div>
                <p>
                  <%= @space.restroom %>
                </p>
              </div>
              <div class="col-6">
                <div class="h6">Max Guests Allowed</div>
                <p>
                  <%= @space.capacity %>
                </p>
              </div>
              <div class="col-6">
                <div class="h6">Restrooms</div>
                <p>
                  <%= @space.restroom %>
                </p>
              </div>
            </div>
            <div class="h6">Description</div>
            <p><%= @space.description %></p>
          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-2 sm-offset-1">
      </div>
      <div class="col-xs-12 col-sm-4 sm-offset-1">
        <div class="booking-form" style="align-content: right">
         <%= render 'shared/form_booking', booking: @booking, space: @space, activity: @activity %>
       </div>
     </div>
   </div>
 </div>
</div>
<!-- <div id="space-description">
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-sm-10 sm-offset-1">
        <h2>About this space</h2>
        <p>
          <%= @space.description %>
        </p>
        <hr>
        <div class="row" id="space-data">
          <div class="col-xs-12 col-sm-2">
            The Space
          </div>
          <div class="col-xs-12 col-sm-4">
            <ul class="list-unstyled">
              <li>Accommodates:  <strong><%= @space.size %></strong></li>
              <li>Rooms:  <strong><%= @space.room %></strong></li>
              <li>Restrooms:  <strong><%= @space.restroom %></strong></li>
            </ul>
          </div>
          <div class="col-xs-12 col-sm-4">
            <ul class="list-unstyled">
              <li>Beds: <strong>1</strong></li>
              <li>Property type: <strong>Apartment</strong></li>
              <li>Room type: <strong>Entire home/apt</strong></li>
            </ul>
          </div>
        </div>
        <hr>
        <div class="row" id="space-data">
          <div class="col-xs-12 col-sm-2">
            Amenities
          </div>
          <div class="col-xs-12 col-sm-4">
            <ul class="list-unstyled">
              <li><i class="fa fa-cutlery"></i><strong>Kitchen</strong></li>
              <li><i class="fa fa-wifi"></i><strong>Wifi</strong></li>
            </ul>
          </div>
          <div class="col-xs-12 col-sm-4">
            <ul class="list-unstyled">
              <li><i class="fa fa-desktop"></i><strong>TV</strong></li>
              <li><i class="fa fa-glass"></i><strong>Welcome drink</strong></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> -->
<div id="space-reviews">
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-sm-10 sm-offset-1">
        <div class="card-header">
          <h2 class="card-title">Reviews</h2>
        </div>
        <% if @space.reviews.present? %>
        <% @space.reviews.each do |review| %>
        <div class="product">
          <div class='product-body'>
            <h3><%= review.content%>
              <% review.rating.times do %>
              <i class="fe fe-star"></i>
              <% end %>
            </h3>
            <p> <strong><%= review.booking.user.first_name %></strong> visited this space <%= review.booking.start_time %> - <%= review.booking.end_time %></p>
          </div>
        </div>
        <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>

<div id="space-recommendations">
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-sm-10 sm-offset-1">
        <div class="card-header">
          <h2 class="card-title ">Other Great Spaces</h2>
        </div>
        <br>
        <div class="row">
        <% @spaces.sample(5).each do |space| %>
        <div class="col-sm-6 col-xl-4">
          <div class="card">
            <%= link_to space_path(space) do %>
            <div class="card-img-top card-pic" style="background-image: url('<%= cl_image_path space.pictures[0].path if space.pictures.any? %>'); height: 175px; background-size: cover !important">
            </div>
            <% end %>
            <div class="card-body d-flex flex-column">
              <h4><a href="#"><%= link_to space.name, space_path(space) %></a></h4>
              <div class="text-muted"><%= space.location %></div>
              <div class="d-flex align-items-center pt-5 mt-auto">
               <div>
                <small class="d-block">$<%= space.price_per_hour %> Per Hour</small>
              </div>
              <div class="mr-3"></div>
              <div>
                <small class="d-block">Capacity: <%= space.capacity %></small>
              </div>
              <div class="ml-auto text-muted">
                <% if fav = space.user_favorited?(current_user)%>
                <%= link_to space_favorite_path(space, fav), :method => "delete", class: "icon d-none d-md-inline-block ml-3" do %>
                <i style="color: red"class="fe fe-heart mr-1"></i>
                <% end %>
                <% else %>
                <%= link_to space_favorites_path(space), method: :post, class: "icon d-none d-md-inline-block ml-3" do %>
                <i class="fe fe-heart mr-1" method="POST"></i>
                <% end %>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>
      <% end %>
    </div>
  </div>
</div>

